function setColor(a){if(null!=a.attr("color")){var t=tinycolor(a.attr("color"));a.css("background-color",a.attr("color")),t.getBrightness()<200?a.css("color","white"):a.css("color","#212121")}}function show(a,t,e,i=!1){$(a).click((function(){var a=$(t);"none"==a.css("display")?(a.css("display",e),$(this).addClass("active")):i&&(a.css("display","none"),$(this).removeClass("active"))}))}function hide(a){$(a).css("display","none")}function notification(){}function async(a,t){var e=getCookie("lingo");switch(a){case"staff-level":$.post("post/updateStaffLevel",{id:t.attr("data-id"),status:t.attr("data")},(function(a,t){1==(a=JSON.parse(a)).result&&webToast.Success({status:dictionary.successful[e],message:dictionary["staff-updated"][e],delay:5e3})}));break;case"branch-status":$.post("post/updateBranchStatus",{id:t.attr("data-id"),status:t.attr("data")},(function(a,t){1==(a=JSON.parse(a)).result&&webToast.Success({status:dictionary.successful[e],message:dictionary["branch-updated"][e],delay:5e3})}));break;case"product-status":$.post("post/updateProductStatus",{id:t.attr("data-id"),status:t.attr("data")},(function(a,t){1==(a=JSON.parse(a)).result&&webToast.Success({status:dictionary.successful[e],message:dictionary["product-updated"][e],delay:5e3})}));break;case"order-status":$.post("post/updateOrderStatus",{id:t.attr("data-id"),status:t.attr("data")},(function(a,t){1==(a=JSON.parse(a)).result?webToast.Success({status:dictionary.successful[e],message:dictionary["order-updated"][e],delay:5e3}):webToast.Danger({status:dictionary["error-occured"][e],message:dictionary[a.error.trn][e]})}));break;case"product-display":webToast.loading({status:dictionary.loading[e],message:dictionary["please-wait"][e],delay:5e4}),$.post("post/productDisplayOrder",{id:t.attr("data-id"),status:t.attr("data")},(function(a,t){null==(a=JSON.parse(a)).error&&location.reload()}));break;default:break}}function getUpload(a,t,e,i){$(a).change((function(){var a=$(this).get(0).files[0];if(a){var r=new FileReader;r.onload=function(a){$(t).attr("src",a.target.result),null!=i&&null!=i&&$(i).attr("src",a.target.result);try{$('input[name="'+e+'"]').val(a.target.result)}catch(a){}},r.readAsDataURL(a)}}))}function trim(a){try{return a.replace(/^\s+|\s+$/gm,"")}catch(t){return a}}function delOption(a,t){var e,r=[];for(i=0;i<a.length;i++){var s=a[i];try{"span"==s.tagName.toLowerCase()&&r.push(a[i])}catch(a){}}for(i=0;i<r.length;i++)t==r[i]&&(e=i);var n=$("#options-input-div"),o=$('input[name="options"]'),d=JSON.parse(base64de(o.val()));d.splice(e,1),r.splice(e,1),o.val(base64en(JSON.stringify(d)));var c="";r.forEach((function(a){c+=a.outerHTML})),n.html(c)}function updateRevenueGraph(a,t){$((function(){if($("#revenue-chart").length){var e=$("#revenue-chart").get(0).getContext("2d");new Chart(e,{type:"bar",data:{labels:a,datasets:[{data:t,backgroundColor:"rgba(255, 86, 48, 0.3)"}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{gridLines:{drawBorder:!1,zeroLineColor:"rgba(0, 0, 0, 0.09)",color:"rgba(0, 0, 0, 0.09)"},ticks:{fontColor:"#bababa",min:0,stepSize:5e3}}],xAxes:[{ticks:{fontColor:"#bababa",beginAtZero:!0},gridLines:{display:!1,drawBorder:!1},barPercentage:.4}]},legend:{display:!1}}})}}))}window.onresize=function(){window.innerWidth>=992&&($("body").removeClass("sidebar-open"),$("#navbarSupportedContent").removeClass("show")),listToArray($(".grid-product-card-img-top")).forEach((function(a){"grid-product-img-info"==a.nextElementSibling.className&&(a.nextElementSibling.style.height=$(a).css("height"),a.nextElementSibling.style.width=$(a).css("width"))})),$(".modal-header").css("height",$(".product-img").css("height"))},$(document).ready((function(){var a=getCookie("lingo");"en"==a?$('a[lang="en"]').addClass("text-light"):$('a[lang="jp"]').addClass("text-light"),$(".lang").click((function(){"en"==$(this).attr("lang")?(setCookie("lingo","en",365),$('a[lang="jp"]').removeClass("text-light"),translator("en")):(setCookie("lingo","jp",365),$('a[lang="en"]').removeClass("text-light"),translator("jp")),$(this).addClass("text-white")})),show("#add-staff","#add-staff-form","table-row",!0),show("#add-branch","#add-branch-form","table-row",!0),show("#delivery-time-fab","#timer","block",!0),getUpload("#browse","#browse-preview","banner"),getUpload("#browse1","#browse-preview1","logo"),getUpload("#browse2","#browse-preview2","image-placeholder"),getUpload("#product-image","#browse-preview","product-img","#preview-small"),$("#save-average-time").click((function(){})),listToArray($(".grid-product-card-img-top")).forEach((function(a){"grid-product-img-info"==a.nextElementSibling.className&&(a.nextElementSibling.style.height=$(a).css("height"),a.nextElementSibling.style.width=$(a).css("width"))}));try{updateRevenueGraph(weekLabels,weekData)}catch(a){}$(".revenew-tab").click((function(){switch(parseInt($(this).attr("data-index"))){case 0:updateRevenueGraph(weekLabels,weekData);break;case 1:updateRevenueGraph(monthLabels,monthData);break;case 2:updateRevenueGraph(threeMonthLabels,threeMonthData);break;case 3:updateRevenueGraph(yearLabels,yearData);break;case 4:updateRevenueGraph(allLabels,allData);break;default:}})),$(".rotate").click((function(){$(this).toggleClass("down")})),$("#addCategoryModal").on("show.bs.modal",(function(a){$("#add-btn").attr("data",a.relatedTarget.getAttribute("data-id")),$("#add-btn").attr("page",a.relatedTarget.getAttribute("data-page"))})),$(".edit-product").click((function(){spinner("products-main").show();var a=$(this).parent().parent().attr("data-id");setCookie("editProductId",a,1),window.location.href="edit-product"})),$("#color-picker").spectrum({type:"text",togglePaletteOnly:"true",hideAfterPaletteSelect:"true",showInput:"true",showInitial:"true"});try{if(null!=$("data#branchData")&&(loadFormData(JSON.parse(base64de($("data#branchData").attr("data-details")))),"null"!=$("data#branchData").attr("data-times"))){var t=base64de($("data#branchData").attr("data-times")).replace('"[',"[").replace(']"',"]");(t=JSON.parse(t)).forEach((function(a){$('input[data-day="open['+a.day+']"]').val(a.open),$('input[data-day="close['+a.day+']"]').val(a.close),$('input[data-day="breakStart['+a.day+']"]').val(a.breakStart),$('input[data-day="breakEnd['+a.day+']"]').val(a.breakEnd)}))}}catch(a){}$(".branch").click((function(){if($("#selectedBranch").val()==$(this).attr("data-id"))$(".branch").css("background-color","#FFF"),$("#selectedBranch").val(""),$('input[name="branch-id"]').val($(this).attr("data-id")),"block"==$("#branchInfo").css("display")&&$("#branchInfo").css("display","none");else{if(loadFormData(JSON.parse(base64de($(this).attr("data-details")))),"null"!=$(this).attr("data-times")){var a=JSON.parse(base64de($(this).attr("data-times")));null==a?["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].forEach((function(a){$('input[data-day="open['+a+']"]').val(""),$('input[data-day="close['+a+']"]').val(""),$('input[data-day="breakStart['+a+']"]').val(""),$('input[data-day="breakEnd['+a+']"]').val("")})):a.forEach((function(a){$('input[data-day="open['+a.day+']"]').val(a.open),$('input[data-day="close['+a.day+']"]').val(a.close),$('input[data-day="breakStart['+a.day+']"]').val(a.breakStart),$('input[data-day="breakEnd['+a.day+']"]').val(a.breakEnd)}))}else["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].forEach((function(a){$('input[data-day="open['+a+']"]').val(""),$('input[data-day="close['+a+']"]').val(""),$('input[data-day="breakStart['+a+']"]').val(""),$('input[data-day="breakEnd['+a+']"]').val("")}));$(".branch").css("background-color","#FFF"),$(this).css("background-color","#C4C4F4"),$("#selectedBranch").val($(this).attr("data-id")),$('input[name="branch-id"]').val($(this).attr("data-id")),"none"==$("#branchInfo").css("display")&&$("#branchInfo").css("display","block")}}));try{var e=$('input[name="order-count"]').val();$('input[name="noc"]');setInterval((function(){$.post("get/orderNotification",{id:e},(function(t,e){try{t=(t=t.stripSlashes().stripSlashes().split('"[').join("[").split('["').join("[")).split(']"').join("]").split('"{').join("{").split('}"').join("}"),(t=JSON.parse(t)).result.length>0&&(playSound("assets/audio/notification.mp3"),webToast.Info({status:dictionary.notification[a]+"("+t.result.length+")",message:"<a href='orders'>"+dictionary["new-order"][a]+"</a>",delay:5e3}))}catch(a){}}))}),15e3)}catch(a){}try{$(".creditcardform").card({debug:!0,container:".card-wrapper",formatting:!0,formSelectors:{numberInput:'input[name="number"]',expiryInput:'input[name="expiry"]',cvcInput:'input[name="cvc"]',nameInput:'input[name="name"]'},cardSelectors:{cardContainer:".jp-card-container",card:".jp-card",numberDisplay:".jp-card-number",expiryDisplay:".jp-card-expiry",cvcDisplay:".jp-card-cvc",nameDisplay:".jp-card-name"},classes:{valid:"jp-card-valid",invalid:"jp-card-invalid"},masks:{cardNumber:!1}})}catch(a){}function i(a,t){a.parent().addClass("mdc-text-field--invalid"),a.parent().addClass("mdc-text-field--focused"),a.addClass("mdc-text-field--invalid"),t&&(a.parent().removeClass("mdc-text-field--invalid"),a.parent().removeClass("mdc-text-field--focused"),a.removeClass("mdc-text-field--invalid"))}$("#delete-card").click((function(){mcxDialog.confirm(dictionary["are-you-sure"][a],{cancelBtnText:dictionary.cancel[a],sureBtnText:dictionary.proceed[a],sureBtnClick:function(){var t=$(this).attr("data-id");$.post("post/deleteSubscription",{id:t},(function(t,e){1==(t=JSON.parse(t)).result&&(webToast.Success({status:dictionary.successful[a],message:dictionary["settings-updated"][a],delay:5e3}),location.reload())}))}})})),$("#add-btn").click((function(){switch(a=getCookie("lingo"),$(this).attr("page")){case"add-product-category":case"add-option-category":var t=$("#category-name"),e=$("#category-description"),i=$("#error-alert-add"),r="add-option-category"==$(this).attr("page")?2:1;""==t.val()||null==t.val()?i.css("display","block"):$.post("post/addCategory",{id:"",name:t.val(),description:e.val(),type:r,creatorId:$(this).attr("data")},(function(t,e){if(1==(t=JSON.parse(t)).result)if(webToast.Success({status:dictionary.successful[a],message:dictionary["category-added"][a],delay:5e3}),"add-product-category"==$("#add-btn").attr("page")){try{var r=$("#product-categories-ul"),s='<div class="mdc-form-field"><div class="mdc-checkbox"><input type="checkbox" name="product-category[]" value="'+t.data.id+'" id="basic-disabled-checkbox" class="mdc-checkbox__native-control" /><div class="mdc-checkbox__background"><svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24"><path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59" /></svg><div class="mdc-checkbox__mixedmark"></div></div></div><label for="basic-disabled-checkbox" class="mt-2 h6" id="basic-disabled-checkbox-label">'+t.data.name+"</label></div>";r.html(r.html()+s)}catch(a){}try{r=$("#all-category-modal"),s='<div class="alert alert-primary p-2 m-1" role="alert">'+t.data.name+'<div class="float-right"><i class="icofont-ui-edit hover click "></i><i class="icofont-ui-delete hover click ml-3 async" data-page="delete-category" data-id='+t.data.id+"></i></div></div>";r.append(s)}catch(a){}}else{(r=$("#option-categories-ul")).html(r.html()+'<li class="mdc-list-item" data-value="'+t.data.id+'">'+t.data.name+"</li>")}else i.html(dictionary["category-exist"][a]),i.css("display","block")}));break}})),$("#category-name").keyup((function(){""!=$(this).val()&&null!=$(this).val()&&$("#error-alert-add").css("display","none")})),$("#save-average-time").click((function(){var t=$(this);$.post("post/updateDeliveryTime",{id:t.attr("data-id"),time:$("#avdetime").val()},(function(t,e){1!=(t=JSON.parse(t)).result&&null!=t.error||(window.history.replaceState&&window.history.replaceState(null,null,window.location.href),webToast.Success({status:dictionary.successful[a],message:dictionary["delivery-time-edited"][a],delay:5e3}))}))})),$("#add-option-btn").click((function(a){a.preventDefault();var t=$('input[name="option-category"]'),e=$('input[name="option-name"]'),r=$('input[name="option-availability"]'),s=$('input[name="option-price"]'),n=$('input[name="option-type"]'),o=$("#options-input-div"),d=$('input[name="options"]');if(i(e,e.val()),null!=e.val()&&""!=e.val()){var c={category:{name:$("#option-category-name").html(),id:t.val()},name:e.val(),available:r.val(),price:s.val(),type:n.val()},l=JSON.parse(base64de(d.val())),p=!1;Array.isArray(l)?(l.forEach((function(a){a=encode(JSON.stringify(a)),encode(JSON.stringify(c))==a&&(p=!0)})),p||(l.push(c),d.val(base64en(JSON.stringify(l))),o.html(o.html()+'<span class="badge rounded-pill bg-primary text-light option-span ml-1 mr-1">'+c.name+'<i class="icofont-close-line" onclick="delOption(this.parentNode.parentNode.childNodes,this.parentNode)"></i></span>'))):(d.val(base64en(JSON.stringify([c]))),o.html('<span class="badge rounded-pill bg-primary text-light option-span ml-1 mr-1">'+c.name+'<i class="icofont-close-line" onclick="delOption(this.parentNode.parentNode.childNodes,this.parentNode)"></i></span>'))}})),$('input[name="option-name"]').keyup((function(){i($(this),$(this).val())})),$("#pending-order").click((function(){var a=$("#pending-order-display"),t=$("#completed-order-display");"none"==a.css("display")&&(t.css("display","none"),a.css("display","block"),$(this).addClass("active"),$("#completed-order").removeClass("active"))})),$("#completed-order").click((function(){var a=$("#pending-order-display"),t=$("#completed-order-display");"none"==t.css("display")&&(t.css("display","block"),a.css("display","none"),$(this).addClass("active"),$("#pending-order").removeClass("active"))}));for(var r=$(".dropdown-toggle"),s=0;s<r.length;s++)setColor($(r[s]));$(".dropdown-item").click((function(){var a,t,e,i,r=$(this).parent().prev(),s=r.prev();t=r.html(),a=r.attr("trn"),e=r.attr("color"),i=r.attr("data"),r.attr("trn",$(this).attr("trn")),r.html($(this).html()),r.attr("color",$(this).attr("color")),r.attr("data",$(this).attr("data")),"INPUT"==s.prop("tagName")&&"hidden"==s.attr("type")&&s.val(r.attr("data")),$(this).attr("trn",a),$(this).html(t),$(this).attr("color",e),$(this).attr("data",i),setColor($(this)),setColor(r),async(r.attr("data-async"),r)})),$(".async").click((function(){var t=$(this);a=getCookie("lingo"),mcxDialog.confirm(dictionary["are-you-sure"][a],{cancelBtnText:dictionary.cancel[a],sureBtnText:dictionary.proceed[a],sureBtnClick:function(){switch(t.attr("data-page")){case"delete-branch":return $.post("post/deleteBranch",{id:t.attr("data-id")},(function(t,e){1==(t=JSON.parse(t)).result&&(window.history.replaceState&&window.history.replaceState(null,null,window.location.href),webToast.Success({status:dictionary.successful[a],message:dictionary["branch-deleted"][a],delay:5e3}),location.reload())}));case"delete-staff":return $.post("post/deleteStaff",{id:t.attr("data-id")},(function(t,e){1==(t=JSON.parse(t)).result&&(window.history.replaceState&&window.history.replaceState(null,null,window.location.href),webToast.Success({status:dictionary.successful[a],message:dictionary["staff-deleted"][a],delay:5e3}),location.reload())}));case"delete-product":return spinner("products-main").show(),$.post("post/deleteProduct",{id:t.attr("data-id")},(function(t,e){1==(t=JSON.parse(t)).result&&(window.history.replaceState&&window.history.replaceState(null,null,window.location.href),webToast.Success({status:dictionary.successful[a],message:dictionary["product-deleted"][a],delay:5e3}),location.reload())}));case"delete-category":return $.post("post/deleteCategory",{id:t.attr("data-id")},(function(e,i){(e=JSON.parse(e)).result&&(webToast.Success({status:dictionary.successful[a],message:dictionary["category-deleted"][a],delay:5e3}),t.parent().parent().css("display","none"))}))}}})})),$("img").on("dragstart",(function(a){a.preventDefault()})),$("body").on("contextmenu","img",(function(a){return!1})),$(".timepicker").mdtimepicker({timeFormat:"hh:mm:ss.000",format:"hh:mm tt",readOnly:!1,hourPadding:!1,theme:"indigo"})}));